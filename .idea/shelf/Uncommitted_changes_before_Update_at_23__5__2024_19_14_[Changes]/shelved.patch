Index: projekt/demo/src/main/java/com/example/demo/security/core/SecurityConfig.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.demo.security.core;\r\n\r\nimport com.example.demo.service.uzivatelService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityCustomizer;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport com.example.demo.security.service.AuthenticationService;\r\n\r\n@Configuration\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n\r\n    @Autowired\r\n    private uzivatelService uzivatelService;\r\n\r\n    @Autowired\r\n    private AuthenticationEntryPoint authEntryPoint;\r\n\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(csrf -> csrf.disable());\r\n        http.authorizeHttpRequests(auth -> auth\r\n//                .requestMatchers(\"/api/authentication\").permitAll()\r\n                .anyRequest().authenticated());\r\n//        http.exceptionHandling((exception)-> exception.authenticationEntryPoint(authEntryPoint).accessDeniedPage(\"/error/accedd-denied\"));\r\n        http.exceptionHandling((exception)-> exception.authenticationEntryPoint(authEntryPoint));\r\n        http.sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n        http.addFilterBefore(new AuthenticationFilter(uzivatelService), UsernamePasswordAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -> web.ignoring().requestMatchers(\"/fitness/api/authentication\")\r\n                .requestMatchers(\"/fitness/api/uzivatel\")\r\n                .requestMatchers(\"/fitness/api/uzivatel/all\")\r\n                .requestMatchers(\"/fitness/api/uzivatel/{id}\")\r\n                .requestMatchers(\"/fitness/api/cvicenie\")\r\n                .requestMatchers(\"/fitness/api/cvicenie/{id}\")\r\n                .requestMatchers(\"/fitness/api/cvicenie/list\")\r\n                .requestMatchers(\"/fitness/api/treningovyPlan\")\r\n                .requestMatchers(\"/fitness/api/treningovyPlan/{id}\")\r\n                .requestMatchers(\"/fitness/api/treningovyPlan/list\")\r\n                .requestMatchers(\"/fitness/api/treningovyPlan/cvicenia/{id}\")\r\n                .requestMatchers(\"/fitness/api/login\")\r\n                .requestMatchers(\"/fitness/api/typCvicenia\")\r\n                .requestMatchers(\"/fitness/api/typCvicenia/{id}\")\r\n                .requestMatchers(\"/fitness/api/typCvicenia/list\")\r\n                .requestMatchers(\"/fitness/api/uzivatel/{userId}/treningovyPlan/{planId}\")\r\n                .requestMatchers(\"/fitness/api/getUzivatelFromToken\")\r\n                .requestMatchers(\"fitness/api/uzivatel/treningovePlany/{id}\")\r\n                .requestMatchers(\"api/authentication/logout\");\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/projekt/demo/src/main/java/com/example/demo/security/core/SecurityConfig.java b/projekt/demo/src/main/java/com/example/demo/security/core/SecurityConfig.java
--- a/projekt/demo/src/main/java/com/example/demo/security/core/SecurityConfig.java	(revision 7dae242d0fa064737ca0930d888fdcf7ada2edba)
+++ b/projekt/demo/src/main/java/com/example/demo/security/core/SecurityConfig.java	(date 1716484458280)
@@ -44,10 +44,12 @@
 
     @Bean
     public WebSecurityCustomizer webSecurityCustomizer() {
-        return (web) -> web.ignoring().requestMatchers("/fitness/api/authentication")
+        return (web) -> web.ignoring()
+                .requestMatchers("/fitness/api/authentication")
                 .requestMatchers("/fitness/api/uzivatel")
                 .requestMatchers("/fitness/api/uzivatel/all")
                 .requestMatchers("/fitness/api/uzivatel/{id}")
+                .requestMatchers("/fitness/api/uzivatel/change/{id}")
                 .requestMatchers("/fitness/api/cvicenie")
                 .requestMatchers("/fitness/api/cvicenie/{id}")
                 .requestMatchers("/fitness/api/cvicenie/list")
